---
- name: OS setup
  become: yes
  hosts: localhost
  tasks:
    - name: Run MacOS
      import_tasks: darwin.yml
      when: ansible_os_family == "Darwin"

    - name: Run Arch Linux
      import_tasks: arch.yml
      when: ansible_facts['distribution'] == "Archlinux"

    - name: Run Ubuntu
      import_tasks: ubuntu.yml
      when: ansible_facts['distribution'] == "Ubuntu"

    - name: Run Debian
      import_tasks: debian.yml
      when: ansible_facts['distribution'] == "Debian"

    - name: Run Alpine
      import_tasks: alpine.yml
      when: ansible_facts['distribution'] == "Alpine"

    # Have some bug... it will be recognitize as Arch !?
    # - name: Run Amazon Linux
    #   import_tasks: amazon-linux.yml
    #   when: ansible_facts['distribution'] == "Amazon"
