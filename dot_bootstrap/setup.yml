---
- hosts: localhost
  become: yes
  tasks:
    - name: Install NeoVim in MacOS
      when: ansible_os_family == "Darwin"
      homebrew:
        name: neovim
        state: present

    - name: Install Software in Raspbian
      when: ansible_os_family == "Debian"
      apt:
        name: snapd
        state: present
        update_cache: yes
    - name: Install 
      when: ansible_os_family == "Debian"
      command: snap install nvim --classic

    - name: 安裝 Neovim 在 Arch Linux
      when: ansible_distribution == "Archlinux"
      pacman:
        name: neovim
        state: present

    - name: 安裝 Neovim 在 Ubuntu
      when: ansible_distribution == "Ubuntu"
      shell: |
        curl -L "https://github.com/neovim/neovim/releases/latest/download/nvim.appimage" -o "${HOME}/.local/bin/nvim"
        chmod u+x "${HOME}/.local/bin/nvim"
      args:
        creates: "${HOME}/.local/bin/nvim"
      become_user: "{{ ansible_env.USER }}"
