---
- name: OS setup
  become: yes
  hosts: localhost
  tasks:
    - name: Run MacOS
      include_tasks: darwin.yml
      when: ansible_os_family == "Darwin"

    - name: Run Ubuntu
      include_tasks: ubuntu.yml
      when: ansible_facts['distribution'] == "Ubuntu"

    - name: Run Debian
      include_tasks: debian.yml
      when: ansible_facts['distribution'] == "Debian"

    - name: Run Alpine
      include_tasks: alpine.yml
      when: ansible_facts['distribution'] == "Alpine"

    - name: Run Amazon Linux
      include_tasks: amazon-linux.yml
      when: ansible_facts['distribution'] == "Amazon"

    - name: Run Arch Linux
      include_tasks: arch.yml
      when: ansible_facts['distribution'] == "Archlinux"
